<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Inventory - Repawblic Pets</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Manrope:wght@500;600;700&display=swap">
  <link rel="stylesheet" href="/css/shelter.css">
  <link rel="stylesheet" href="/css/inventory.css">
</head>
<body>
  <%- include('partials/navbar') %>

  <main>
    <header>
      <p class="muted">Admin Â· Product Management</p>
      <h1>Inventory</h1>
      <p class="muted">Manage all products in your store</p>
    </header>

    <section class="card">
      <div class="table-header">
        <div class="inventory-stats">
          <span class="muted">Total: <%= products ? products.length : 0 %></span>
          <span class="muted">In Stock: <%= products ? products.filter(p => p.stock > 0).length : 0 %></span>
          <span class="muted">Out: <%= products ? products.filter(p => p.stock === 0).length : 0 %></span>
        </div>
        <a class="btn" href="/products/new">+ Add Product</a>
      </div>

      <% if (!products || !products.length) { %>
        <p class="muted table-empty">No products found</p>
      <% } else { %>
        <div class="product-grid">
          <% products.forEach(product => { %>
            <article class="card product-card">
              <img 
                src="data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22200%22 height=%22180%22%3E%3Crect fill=%22%23f3f4f6%22 width=%22200%22 height=%22180%22/%3E%3C/svg%3E" 
                alt="<%= product.product_name %>"
              >
              <div class="product-name"><%= product.product_name %></div>
              <div class="product-category"><%= product.category %></div>
              <div class="product-price">$<%= (Number(product.price || 0) / 100).toFixed(2) %></div>
              <span class="stock-badge <%= product.stock > 10 ? 'stock-in' : product.stock > 0 ? 'stock-low' : 'stock-out' %>">
                Stock: <%= product.stock %>
              </span>
              <div class="form-actions">
                <a href="/products/<%= product.product_id %>/edit" class="btn outline">Edit</a>
                <form method="POST" action="/products/<%= product.product_id %>/delete" class="delete-form" onsubmit="return confirm('Delete this product?');">
                  <button type="submit" class="btn btn-danger">Delete</button>
                </form>
              </div>
            </article>
          <% }); %>
        </div>
      <% } %>
    </section>
  </main>

  <%- include('partials/footer') %>
</body>
</html>
